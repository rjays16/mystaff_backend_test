{"ast":null,"code":"import { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  id: \"app\"\n};\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"h1\", null, \"Video List\", -1 /* HOISTED */);\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"text-center\"\n}, \" Empty Data \", -1 /* HOISTED */);\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_b_button = _resolveComponent(\"b-button\");\n  const _component_b_col = _resolveComponent(\"b-col\");\n  const _component_b_row = _resolveComponent(\"b-row\");\n  const _component_b_table = _resolveComponent(\"b-table\");\n  const _component_UploadModal = _resolveComponent(\"UploadModal\");\n  const _component_b_container = _resolveComponent(\"b-container\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_b_container, null, {\n    default: _withCtx(() => [_createVNode(_component_b_row, {\n      class: \"mb-3\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_b_col, null, {\n        default: _withCtx(() => [_hoisted_2, _createVNode(_component_b_button, {\n          size: \"md\",\n          variant: \"success\",\n          class: \"float-start\",\n          onClick: $options.showUploadModal\n        }, {\n          default: _withCtx(() => [_createTextVNode(\"Upload Video\")]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"onClick\"]), _createVNode(_component_b_button, {\n          size: \"md\",\n          variant: \"danger\",\n          class: \"float-end\",\n          onClick: $options.logout\n        }, {\n          default: _withCtx(() => [_createTextVNode(\"Logout\")]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"onClick\"])]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_b_row, null, {\n      default: _withCtx(() => [_createVNode(_component_b_col, null, {\n        default: _withCtx(() => [_createVNode(_component_b_table, {\n          striped: \"\",\n          hover: \"\",\n          items: _ctx.videos,\n          fields: $data.fields,\n          \"show-empty\": _ctx.videos.length === 0\n        }, {\n          \"cell(actions)\": _withCtx(data => [_createVNode(_component_b_button, {\n            size: \"sm\",\n            variant: \"danger\",\n            onClick: $event => $options.deleteVideo(data.item.id)\n          }, {\n            default: _withCtx(() => [_createTextVNode(\"Delete\")]),\n            _: 2 /* DYNAMIC */\n          }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"])]),\n          empty: _withCtx(() => [_hoisted_3]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"items\", \"fields\", \"show-empty\"])]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_UploadModal, {\n      ref: \"uploadModal\",\n      onVideoUploaded: _ctx.fetchVideos\n    }, null, 8 /* PROPS */, [\"onVideoUploaded\"])]),\n    _: 1 /* STABLE */\n  })]);\n}","map":{"version":3,"names":["id","_createElementVNode","class","_createElementBlock","_hoisted_1","_createVNode","_component_b_container","default","_withCtx","_component_b_row","_component_b_col","_hoisted_2","_component_b_button","size","variant","onClick","$options","showUploadModal","_createTextVNode","_","logout","_component_b_table","striped","hover","items","_ctx","videos","fields","$data","length","data","$event","deleteVideo","item","empty","_hoisted_3","_component_UploadModal","ref","onVideoUploaded","fetchVideos"],"sources":["C:\\xampp\\htdocs\\assessment_test\\ui\\src\\components\\Main.vue"],"sourcesContent":["<template>\r\n  <div id=\"app\">\r\n    <b-container>\r\n      <b-row class=\"mb-3\">\r\n        <b-col>\r\n          <h1>Video List</h1>\r\n          <b-button size=\"md\" variant=\"success\" class=\"float-start\" @click=\"showUploadModal\">Upload Video</b-button>\r\n          <b-button size=\"md\" variant=\"danger\" class=\"float-end\" @click=\"logout\">Logout</b-button>\r\n        </b-col>\r\n      </b-row>\r\n      <b-row>\r\n        <b-col>\r\n          <b-table striped hover :items=\"videos\" :fields=\"fields\" :show-empty=\"videos.length === 0\">\r\n            <template #cell(actions)=\"data\">\r\n              <b-button size=\"sm\" variant=\"danger\" @click=\"deleteVideo(data.item.id)\">Delete</b-button>\r\n            </template>\r\n            <template #empty>\r\n              <div class=\"text-center\">\r\n                Empty Data\r\n              </div>\r\n            </template>\r\n          </b-table>\r\n        </b-col>\r\n      </b-row>\r\n      <UploadModal ref=\"uploadModal\" @video-uploaded=\"fetchVideos\" />\r\n    </b-container>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport UploadModal from \"@/components/Modal/UploadModal.vue\";\r\nimport { mapState, mapActions } from 'vuex';\r\nimport Swal from 'sweetalert2';\r\nimport AuthService from \"../../AuthService\";\r\n\r\nexport default {\r\n  name: 'App',\r\n  components: { UploadModal },\r\n  data() {\r\n    return {\r\n      fields: [\r\n        { key: 'id', label: 'ID' },\r\n        { key: 'name', label: 'Name' },\r\n        { key: 'size', label: 'Size', formatter: this.formatSize },\r\n        { key: 'actions', label: 'Actions' }\r\n      ],\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapState({\r\n      videos: state => state.videos\r\n    }),\r\n  },\r\n  methods: {\r\n    ...mapActions(['fetchVideos', 'logout']),\r\n    showUploadModal() {\r\n      this.$refs.uploadModal.showModal();\r\n    },\r\n    async deleteVideo(id) {\r\n      try {\r\n        console.log('Deleting video with id:', id);\r\n        await this.$store.dispatch('deleteVideo', id);\r\n        Swal.fire({\r\n          title: 'Success!',\r\n          text: 'Video successfully deleted',\r\n          icon: 'success',\r\n          confirmButtonText: 'OK'\r\n        });\r\n      } catch (error) {\r\n        console.error('Error deleting video:', error);\r\n        Swal.fire({\r\n          title: 'Error!',\r\n          text: 'Failed to delete video',\r\n          icon: 'error',\r\n          confirmButtonText: 'OK'\r\n        });\r\n      }\r\n    },\r\n    async logout() {\r\n      try {\r\n        await this.$store.dispatch('logout');\r\n        AuthService.removeToken();\r\n        AuthService.removeUser();\r\n        Swal.fire({\r\n          title: 'Logged Out',\r\n          text: 'You have been successfully logged out.',\r\n          icon: 'success',\r\n          confirmButtonText: 'OK'\r\n        }).then(() => {\r\n          this.$router.push('/login');\r\n        });\r\n      } catch (error) {\r\n        console.error('Error logging out:', error);\r\n        Swal.fire({\r\n          title: 'Error!',\r\n          text: 'Failed to logout',\r\n          icon: 'error',\r\n          confirmButtonText: 'OK'\r\n        });\r\n      }\r\n    },\r\n    formatSize(sizeInBytes) {\r\n      if (sizeInBytes === 0) return '0 B';\r\n\r\n      const units = ['B', 'KB', 'MB', 'GB', 'TB'];\r\n      const digitGroups = Math.floor(Math.log(sizeInBytes) / Math.log(1024));\r\n\r\n      return `${(sizeInBytes / Math.pow(1024, digitGroups)).toFixed(2)} ${units[digitGroups]}`;\r\n    },\r\n  },\r\n  created() {\r\n    if (AuthService.isAuthenticated()) {\r\n      this.fetchVideos();\r\n    } else {\r\n      this.$router.push('/login');\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n#app {\r\n  font-family: Avenir, Helvetica, Arial, sans-serif;\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n  text-align: center;\r\n  color: #2c3e50;\r\n  margin-top: 60px;\r\n}\r\n</style>\r\n"],"mappings":";;EACOA,EAAE,EAAC;AAAK;gCAILC,mBAAA,CAAmB,YAAf,YAAU;gCAYVA,mBAAA,CAEM;EAFDC,KAAK,EAAC;AAAa,GAAC,cAEzB;;;;;;;;uBAlBZC,mBAAA,CAyBM,OAzBNC,UAyBM,GAxBJC,YAAA,CAuBcC,sBAAA;IAzBlBC,OAAA,EAAAC,QAAA,CAGM,MAMQ,CANRH,YAAA,CAMQI,gBAAA;MANDP,KAAK,EAAC;IAAM;MAHzBK,OAAA,EAAAC,QAAA,CAIQ,MAIQ,CAJRH,YAAA,CAIQK,gBAAA;QARhBH,OAAA,EAAAC,QAAA,CAKU,MAAmB,CAAnBG,UAAmB,EACnBN,YAAA,CAA0GO,mBAAA;UAAhGC,IAAI,EAAC,IAAI;UAACC,OAAO,EAAC,SAAS;UAACZ,KAAK,EAAC,aAAa;UAAEa,OAAK,EAAEC,QAAA,CAAAC;;UAN5EV,OAAA,EAAAC,QAAA,CAM6F,MAAY,CANzGU,gBAAA,CAM6F,cAAY,E;UANzGC,CAAA;wCAOUd,YAAA,CAAwFO,mBAAA;UAA9EC,IAAI,EAAC,IAAI;UAACC,OAAO,EAAC,QAAQ;UAACZ,KAAK,EAAC,WAAW;UAAEa,OAAK,EAAEC,QAAA,CAAAI;;UAPzEb,OAAA,EAAAC,QAAA,CAOiF,MAAM,CAPvFU,gBAAA,CAOiF,QAAM,E;UAPvFC,CAAA;;QAAAA,CAAA;;MAAAA,CAAA;QAUMd,YAAA,CAaQI,gBAAA;MAvBdF,OAAA,EAAAC,QAAA,CAWQ,MAWQ,CAXRH,YAAA,CAWQK,gBAAA;QAtBhBH,OAAA,EAAAC,QAAA,CAYU,MASU,CATVH,YAAA,CASUgB,kBAAA;UATDC,OAAO,EAAP,EAAO;UAACC,KAAK,EAAL,EAAK;UAAEC,KAAK,EAAEC,IAAA,CAAAC,MAAM;UAAGC,MAAM,EAAEC,KAAA,CAAAD,MAAM;UAAG,YAAU,EAAEF,IAAA,CAAAC,MAAM,CAACG,MAAM;;UACrE,eAAa,EAAArB,QAAA,CACmEsB,IAD7D,KAC5BzB,YAAA,CAAyFO,mBAAA;YAA/EC,IAAI,EAAC,IAAI;YAACC,OAAO,EAAC,QAAQ;YAAEC,OAAK,EAAAgB,MAAA,IAAEf,QAAA,CAAAgB,WAAW,CAACF,IAAI,CAACG,IAAI,CAACjC,EAAE;;YAdnFO,OAAA,EAAAC,QAAA,CAcsF,MAAM,CAd5FU,gBAAA,CAcsF,QAAM,E;YAd5FC,CAAA;;UAgBuBe,KAAK,EAAA1B,QAAA,CACd,MAEM,CAFN2B,UAEM,C;UAnBpBhB,CAAA;;QAAAA,CAAA;;MAAAA,CAAA;QAwBMd,YAAA,CAA+D+B,sBAAA;MAAlDC,GAAG,EAAC,aAAa;MAAEC,eAAc,EAAEb,IAAA,CAAAc;;IAxBtDpB,CAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}