{"ast":null,"code":"import { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  id: \"app\"\n};\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"h1\", null, \"Product List\", -1 /* HOISTED */);\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"text-center\"\n}, \" Empty Data \", -1 /* HOISTED */);\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_b_button = _resolveComponent(\"b-button\");\n  const _component_b_col = _resolveComponent(\"b-col\");\n  const _component_b_row = _resolveComponent(\"b-row\");\n  const _component_b_table = _resolveComponent(\"b-table\");\n  const _component_AddModal = _resolveComponent(\"AddModal\");\n  const _component_EditModal = _resolveComponent(\"EditModal\");\n  const _component_b_container = _resolveComponent(\"b-container\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_b_container, null, {\n    default: _withCtx(() => [_createVNode(_component_b_row, {\n      class: \"mb-3\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_b_col, null, {\n        default: _withCtx(() => [_hoisted_2, _createVNode(_component_b_button, {\n          size: \"md\",\n          variant: \"success\",\n          class: \"float-start\",\n          onClick: $options.showModal\n        }, {\n          default: _withCtx(() => [_createTextVNode(\"Add New Product\")]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"onClick\"]), _createVNode(_component_b_button, {\n          size: \"md\",\n          variant: \"danger\",\n          class: \"float-end\",\n          onClick: _ctx.logout\n        }, {\n          default: _withCtx(() => [_createTextVNode(\"Logout\")]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"onClick\"])]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_b_row, null, {\n      default: _withCtx(() => [_createVNode(_component_b_col, null, {\n        default: _withCtx(() => [_createVNode(_component_b_table, {\n          striped: \"\",\n          hover: \"\",\n          items: $options.productsWithStatus,\n          fields: $data.fields,\n          \"show-empty\": $options.productsWithStatus.length === 0\n        }, {\n          \"cell(actions)\": _withCtx(data => [_createVNode(_component_b_button, {\n            size: \"sm\",\n            variant: \"primary\",\n            onClick: $event => $options.openEditModal(data.item),\n            class: \"me-3\"\n          }, {\n            default: _withCtx(() => [_createTextVNode(\"Edit\")]),\n            _: 2 /* DYNAMIC */\n          }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"]), _createVNode(_component_b_button, {\n            size: \"sm\",\n            variant: \"danger\",\n            onClick: $event => $options.deleteProduct(data.item.id)\n          }, {\n            default: _withCtx(() => [_createTextVNode(\"Delete\")]),\n            _: 2 /* DYNAMIC */\n          }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"])]),\n          empty: _withCtx(() => [_hoisted_3]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"items\", \"fields\", \"show-empty\"])]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_AddModal, {\n      ref: \"addModal\",\n      onAddProduct: $options.addProduct\n    }, null, 8 /* PROPS */, [\"onAddProduct\"]), _createVNode(_component_EditModal, {\n      editedItem: $data.editedItem,\n      showEditModal: $data.showEditModal,\n      statusOptions: $data.statusOptions,\n      onSubmitEdit: $options.updateEditedItem,\n      onCancelEdit: $options.closeEditModal\n    }, null, 8 /* PROPS */, [\"editedItem\", \"showEditModal\", \"statusOptions\", \"onSubmitEdit\", \"onCancelEdit\"])]),\n    _: 1 /* STABLE */\n  })]);\n}","map":{"version":3,"names":["id","_createElementVNode","class","_createElementBlock","_hoisted_1","_createVNode","_component_b_container","default","_withCtx","_component_b_row","_component_b_col","_hoisted_2","_component_b_button","size","variant","onClick","$options","showModal","_createTextVNode","_","_ctx","logout","_component_b_table","striped","hover","items","productsWithStatus","fields","$data","length","data","$event","openEditModal","item","deleteProduct","empty","_hoisted_3","_component_AddModal","ref","onAddProduct","addProduct","_component_EditModal","editedItem","showEditModal","statusOptions","onSubmitEdit","updateEditedItem","onCancelEdit","closeEditModal"],"sources":["C:\\xampp\\htdocs\\assessment_test\\ui\\src\\components\\Main.vue"],"sourcesContent":["<template>\r\n  <div id=\"app\">\r\n    <b-container>\r\n      <b-row class=\"mb-3\">\r\n        <b-col>\r\n          <h1>Product List</h1>\r\n          <b-button size=\"md\" variant=\"success\" class=\"float-start\" @click=\"showModal\">Add New Product</b-button>\r\n          <b-button size=\"md\" variant=\"danger\" class=\"float-end\" @click=\"logout\">Logout</b-button>\r\n        </b-col>\r\n      </b-row>\r\n      <b-row>\r\n        <b-col>\r\n          <b-table striped hover :items=\"productsWithStatus\" :fields=\"fields\" :show-empty=\"productsWithStatus.length === 0\">\r\n            <template #cell(actions)=\"data\">\r\n              <b-button size=\"sm\" variant=\"primary\" @click=\"openEditModal(data.item)\" class=\"me-3\">Edit</b-button>\r\n              <b-button size=\"sm\" variant=\"danger\" @click=\"deleteProduct(data.item.id)\">Delete</b-button>\r\n            </template>\r\n            <template #empty>\r\n              <div class=\"text-center\">\r\n                Empty Data\r\n              </div>\r\n            </template>\r\n          </b-table>\r\n        </b-col>\r\n      </b-row>\r\n      <AddModal ref=\"addModal\" @add-product=\"addProduct\"/>\r\n      <EditModal\r\n          :editedItem=\"editedItem\"\r\n          :showEditModal=\"showEditModal\"\r\n          :statusOptions=\"statusOptions\"\r\n          @submit-edit=\"updateEditedItem\"\r\n          @cancel-edit=\"closeEditModal\"\r\n      />\r\n    </b-container>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport AddModal from \"@/components/Modal/AddModal.vue\";\r\nimport EditModal from \"@/components/Modal/EditModal.vue\";\r\nimport { mapState, mapActions } from 'vuex';\r\nimport Swal from 'sweetalert2';\r\nimport axios from \"axios\";\r\nimport AuthService from \"../../AuthService\";\r\nexport default {\r\n  name: 'App',\r\n  components: {AddModal, EditModal },\r\n  data() {\r\n    return {\r\n      authService: new AuthService(),\r\n      fields: [\r\n        { key: 'id', label: 'ID' },\r\n        { key: 'title', label: 'Title' },\r\n        { key: 'description', label: 'Description' },\r\n        { key: 'due_date', label: 'Due Date' },\r\n        { key: 'status', label: 'Status' },\r\n        { key: 'actions', label: 'Actions' }\r\n      ],\r\n      statusOptions: [\r\n        { value: 1, text: 'Active' },\r\n        { value: 0, text: 'Expired' }\r\n      ],\r\n      showEditModal: false,\r\n      editedItem: {}\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState({\r\n      products: state => state.products\r\n    }),\r\n    productsWithStatus() {\r\n      return this.products.map(product => ({\r\n        ...product,\r\n        status: this.mapStatus(product.status)\r\n      }));\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapActions(['getProducts', 'updateProduct']),\r\n    showModal() {\r\n      this.$refs.addModal.showModal();\r\n    },\r\n    openEditModal(item) {\r\n      this.editedItem = {...item};\r\n      this.showEditModal = true;\r\n    },\r\n    closeEditModal() {\r\n      this.showEditModal = false;\r\n    },\r\n    // updateEditedItem(updatedItem) {\r\n    //   const index = this.products.findIndex(p => p.id === updatedItem.id);\r\n    //   if (index !== -1) {\r\n    //     this.$store.commit('SET_PRODUCTS', [\r\n    //       ...this.products.slice(0, index),\r\n    //       updatedItem,\r\n    //       ...this.products.slice(index + 1)\r\n    //     ]);\r\n    //   }\r\n    //   this.showEditModal = false;\r\n    // },\r\n\r\n    async updateEditedItem(updatedItem) {\r\n      try {\r\n        const response = await this.updateProduct(updatedItem);\r\n        const index = this.products.findIndex(p => p.id === response.id);\r\n        if (index !== -1) {\r\n          this.$store.commit('UPDATE_PRODUCT', response);\r\n        }\r\n        this.showEditModal = false;\r\n      } catch (error) {\r\n        console.error('Error updating product:', error);\r\n        Swal.fire({\r\n          title: 'Error!',\r\n          text: 'Failed to update product',\r\n          icon: 'error',\r\n          confirmButtonText: 'OK'\r\n        });\r\n      }\r\n    },\r\n    async deleteProduct(id) {\r\n      try {\r\n        console.log('Deleting product with id:', id);\r\n        await this.$store.dispatch('deleteProduct', id);\r\n        Swal.fire({\r\n          title: 'Success!',\r\n          text: 'Product successfully deleted',\r\n          icon: 'success',\r\n          confirmButtonText: 'OK'\r\n        });\r\n      } catch (error) {\r\n        console.error('Error deleting product:', error);\r\n      }\r\n    },\r\n    addProduct(newProduct) {\r\n      this.$store.commit('ADD_PRODUCT', newProduct);\r\n    },\r\n    mapStatus(status) {\r\n      return status === 1 ? 'active' : 'expired';\r\n    },\r\n    methods: {\r\n      // ...\r\n      async logout() {\r\n        try {\r\n          await this.authService.logout();\r\n          this.authService.removeToken();\r\n          this.$router.push('/login');\r\n        } catch (error) {\r\n          console.error('Error during logout:', error);\r\n        }\r\n      },\r\n    }\r\n  },\r\n  created() {\r\n    this.getProducts();\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n#app {\r\n  font-family: Avenir, Helvetica, Arial, sans-serif;\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n  text-align: center;\r\n  color: #2c3e50;\r\n  margin-top: 60px;\r\n}\r\n</style>\r\n"],"mappings":";;EACOA,EAAE,EAAC;AAAK;gCAILC,mBAAA,CAAqB,YAAjB,cAAY;gCAaZA,mBAAA,CAEM;EAFDC,KAAK,EAAC;AAAa,GAAC,cAEzB;;;;;;;;;uBAnBZC,mBAAA,CAiCM,OAjCNC,UAiCM,GAhCJC,YAAA,CA+BcC,sBAAA;IAjClBC,OAAA,EAAAC,QAAA,CAGM,MAMQ,CANRH,YAAA,CAMQI,gBAAA;MANDP,KAAK,EAAC;IAAM;MAHzBK,OAAA,EAAAC,QAAA,CAIQ,MAIQ,CAJRH,YAAA,CAIQK,gBAAA;QARhBH,OAAA,EAAAC,QAAA,CAKU,MAAqB,CAArBG,UAAqB,EACrBN,YAAA,CAAuGO,mBAAA;UAA7FC,IAAI,EAAC,IAAI;UAACC,OAAO,EAAC,SAAS;UAACZ,KAAK,EAAC,aAAa;UAAEa,OAAK,EAAEC,QAAA,CAAAC;;UAN5EV,OAAA,EAAAC,QAAA,CAMuF,MAAe,CANtGU,gBAAA,CAMuF,iBAAe,E;UANtGC,CAAA;wCAOUd,YAAA,CAAwFO,mBAAA;UAA9EC,IAAI,EAAC,IAAI;UAACC,OAAO,EAAC,QAAQ;UAACZ,KAAK,EAAC,WAAW;UAAEa,OAAK,EAAEK,IAAA,CAAAC;;UAPzEd,OAAA,EAAAC,QAAA,CAOiF,MAAM,CAPvFU,gBAAA,CAOiF,QAAM,E;UAPvFC,CAAA;;QAAAA,CAAA;;MAAAA,CAAA;QAUMd,YAAA,CAcQI,gBAAA;MAxBdF,OAAA,EAAAC,QAAA,CAWQ,MAYQ,CAZRH,YAAA,CAYQK,gBAAA;QAvBhBH,OAAA,EAAAC,QAAA,CAYU,MAUU,CAVVH,YAAA,CAUUiB,kBAAA;UAVDC,OAAO,EAAP,EAAO;UAACC,KAAK,EAAL,EAAK;UAAEC,KAAK,EAAET,QAAA,CAAAU,kBAAkB;UAAGC,MAAM,EAAEC,KAAA,CAAAD,MAAM;UAAG,YAAU,EAAEX,QAAA,CAAAU,kBAAkB,CAACG,MAAM;;UAC7F,eAAa,EAAArB,QAAA,CAC8EsB,IADxE,KAC5BzB,YAAA,CAAoGO,mBAAA;YAA1FC,IAAI,EAAC,IAAI;YAACC,OAAO,EAAC,SAAS;YAAEC,OAAK,EAAAgB,MAAA,IAAEf,QAAA,CAAAgB,aAAa,CAACF,IAAI,CAACG,IAAI;YAAG/B,KAAK,EAAC;;YAd5FK,OAAA,EAAAC,QAAA,CAcmG,MAAI,CAdvGU,gBAAA,CAcmG,MAAI,E;YAdvGC,CAAA;4DAecd,YAAA,CAA2FO,mBAAA;YAAjFC,IAAI,EAAC,IAAI;YAACC,OAAO,EAAC,QAAQ;YAAEC,OAAK,EAAAgB,MAAA,IAAEf,QAAA,CAAAkB,aAAa,CAACJ,IAAI,CAACG,IAAI,CAACjC,EAAE;;YAfrFO,OAAA,EAAAC,QAAA,CAewF,MAAM,CAf9FU,gBAAA,CAewF,QAAM,E;YAf9FC,CAAA;;UAiBuBgB,KAAK,EAAA3B,QAAA,CACd,MAEM,CAFN4B,UAEM,C;UApBpBjB,CAAA;;QAAAA,CAAA;;MAAAA,CAAA;QAyBMd,YAAA,CAAoDgC,mBAAA;MAA1CC,GAAG,EAAC,UAAU;MAAEC,YAAW,EAAEvB,QAAA,CAAAwB;+CACvCnC,YAAA,CAMEoC,oBAAA;MALGC,UAAU,EAAEd,KAAA,CAAAc,UAAU;MACtBC,aAAa,EAAEf,KAAA,CAAAe,aAAa;MAC5BC,aAAa,EAAEhB,KAAA,CAAAgB,aAAa;MAC5BC,YAAW,EAAE7B,QAAA,CAAA8B,gBAAgB;MAC7BC,YAAW,EAAE/B,QAAA,CAAAgC;;IA/BxB7B,CAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}